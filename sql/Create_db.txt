CREATE TABLE Nguoi_Dung (
    ma_nguoi_dung INT PRIMARY KEY AUTO_INCREMENT,
    ho_ten VARCHAR(100) NOT NULL,
    ten_dang_nhap VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    mat_khau VARCHAR(255) NOT NULL,
    vai_tro ENUM('admin', 'bacsi', 'khach') DEFAULT 'khach',
    ngay_tao TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    ngay_sinh DATE,
    gioi_tinh ENUM('Nam', 'Nu', 'Khac')
);

CREATE TABLE Benh (
    ma_benh INT PRIMARY KEY AUTO_INCREMENT,
    ten_benh VARCHAR(100) NOT NULL,
    mo_ta TEXT,
    ngay_tao TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE Nha_San_Xuat (
    ma_nha_sx INT PRIMARY KEY AUTO_INCREMENT,
    ten_nha_sx VARCHAR(100) NOT NULL,
    quoc_gia VARCHAR(50),
    ngay_tao TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE Vaccine (
    ma_vaccine INT PRIMARY KEY AUTO_INCREMENT,
    ten_vaccine VARCHAR(100) NOT NULL,
    hinh_anh_url VARCHAR(255),
    so_lo VARCHAR(50),
    ngay_sx DATE,
    ngay_het_han DATE,
    tong_sl INT,
    sl_con_lai INT,
    gia_nhap DECIMAL(10,2),
    gia_ban DECIMAL(10,2),
    mo_ta TEXT,
    ma_benh INT,
    ma_nha_sx INT,
    ngay_tao TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (ma_benh) REFERENCES Benh(ma_benh),
    FOREIGN KEY (ma_nha_sx) REFERENCES Nha_San_Xuat(ma_nha_sx)
);

CREATE TABLE Thong_Tin_Mua (
    ma_giao_dich INT PRIMARY KEY AUTO_INCREMENT,
    ma_vaccine INT,
    ma_khach INT,
    so_luong_mua INT,
    tong_tien DECIMAL(10,2),
    ngay_giao_dich TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (ma_vaccine) REFERENCES Vaccine(ma_vaccine),
    FOREIGN KEY (ma_khach) REFERENCES Nguoi_Dung(ma_nguoi_dung)
);

CREATE TABLE Tiem_Chung (
    ma_tiem_chung INT PRIMARY KEY AUTO_INCREMENT,
    ma_vaccine INT,
    ma_bac_si INT,
    ma_khach INT,
    ngay_chi_dinh DATE,
    ngay_tiem DATE,
    trang_thai_tiem ENUM('da_tiem', 'huy', 'cho_tiem') DEFAULT 'cho_tiem',
    ghi_chu TEXT,
    FOREIGN KEY (ma_vaccine) REFERENCES Vaccine(ma_vaccine),
    FOREIGN KEY (ma_bac_si) REFERENCES Nguoi_Dung(ma_nguoi_dung),
    FOREIGN KEY (ma_khach) REFERENCES Nguoi_Dung(ma_nguoi_dung)
);